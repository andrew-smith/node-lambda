<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>DANGER DANGER DANGER</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>

<body>
  <h1>DANGER DANGER DANGER</h1>
  
  <input type="text" id="inputtext" /> <input type="submit" id="submit" />
  <script>
    var BASE_URL = "https://i5e5wdw4zg.execute-api.ap-southeast-2.amazonaws.com/live"
    $(function() {
      $("#submit").click(function() {
        $("#outputstd").text("loading...");
        $("#outputerr").text("loading...");
        var req = {
          cmd: $("#inputtext").val()
        };
        $.post(BASE_URL + "/exec", JSON.stringify(req), function(data) {
          
          if(data.stdout || data.stderr) {
              $("#outputstd").text(data.stdout);
              $("#outputerr").text(data.stderr);
          }
          else {
              $("#outputstd").text("");
              if(data.errorMessage) {
                  $("#outputerr").text(data.errorMessage);
              }
              else {
                  $("#outputerr").text(JSON.stringify(data, null, 4));
              }
          }
        })
      });
    });
    
  </script>
  
  <p>
    <h3>stdout:</h3>
    <pre id="outputstd">
      
    </pre>
  </p>
  <p>
    <h3>stderr:</h3>
    <pre id="outputerr">
      
    </pre>
  </p>
</body>
</html>
